{"name":"Codeigniter-layout-library","tagline":"Codeigniter layout / template library","body":"Codeigniter is a great tool kit for people who build web sites using PHP. It provides a rich set of libraries for commonly needed tasks. It is a framework with small footprint and performance is good. But there are many things on CI that I don't like. Loading the views is one of them. For example in every controller your code may end up like this\r\n\r\n``    \r\n$this->load->view('header');\r\n$this->load->view('menu');\r\n$this->load->view('content', $data);\r\n$this->load->view('footer');\r\n``    \r\nSo I write library to avoid this kind of code and keep things simple. By using this your controller might look like this\r\n\r\n``    \r\npublic function posts($id)\r\n{\r\n     $this->layout->set($this->Blog->posts($id));\r\n}\r\n``    \r\nThat's it. No more loading views. For static pages it will be more simple. A empty controller may be enough.\r\n\r\n``    \r\npublic function pages()\r\n{\r\n\r\n}\r\n``    \r\nYou can download the source code from here https://github.com/sifat/codeigniter-layout-library\r\nThis library is similar to cakephp layout. Those who are familiar with cakephp will feel right at home.\r\n\r\nInstallation\r\n\r\nCopy the files from this package to the correspoding folder in your application folder. For example, copy config/layout.php to application/config/layout.php. Copy the contents of config/hooks.php file to application/config/hooks.php file\r\n\r\n``    \r\n$hook['post_controller'] = array(\r\n    'class' => '',\r\n    'function' => 'layout',\r\n    'filename' => 'Layout.php',\r\n    'filepath' => 'hooks',\r\n);\r\n``    \r\nand set\r\n\r\n``    $config['enable_hooks'] = TRUE;``    \r\nin application/config/config.php file. For more details about hook you can read here. However, this hook part is optional.\r\n\r\nConfiguration\r\n\r\nEdit the config/layout.php as needed.\r\n\r\nLayout\r\n\r\nLayouts are view files that contain code to represent many views. Anything you want to see in all of your views should be placed in a layout. Views are rendered inside a layout. Folder location of layouts are in application/views/layout. This path can be changed by editing config file. But this must be under views folder.\r\n\r\nLayout variables\r\n\r\nThese variables can be set from controller or from views. Details are below:\r\n\r\n$meta: This can be string or array. For details please see codeigniter user guide\r\n\r\n$title_for_layout: Title of your page. It generates automatically. But you can overwrite it from controller/views.\r\n\r\n$style_for_layout: Contains any external or embedded stylesheet added by add_css() method. Helpful for adding style from controller/view.\r\n\r\n$script_for_layout: Contains any external or embedded javascript added by add_js() method. Helpful for adding style from controller/view.\r\n\r\n$Layout: Reference to Layout class. Layout class properties and methods are accessible by this variable.\r\n\r\n``    \r\n$Layout->element('demo');\r\n``    \r\n$contents_for_layout: Contains the view. This is where view will be placed.\r\n\r\nEletments: Many applications have small blocks of presentation code that need to be repeated from page to page, sometimes in different places in the layout. These reusable parts are called Elements. Ads, help boxes, navigational controls, extra menus, login forms, and callouts can be used as elements. An element is basically a mini-view that can be included in other views, in layouts, and even within other elements. Variables that are available in the views are also available in elements. You can use elements in following way.\r\n\r\n``    \r\necho $Layout->element('demo');\r\n``    \r\nLoading the library: you can load the library like this in your controller\r\n\r\n``    \r\n$this->load->library('layout');\r\n``    \r\nOr\r\n\r\n``    \r\n$this->load->library('layout', array('title_for_layout'=>'test')); //any Layout class variable can be set\r\n``    \r\nYou can also autoload the library.\r\n\r\nSetting a layout: If nothing specified layout will be loaded from config. You can set which layout to render by this:\r\n\r\n``    \r\n//controller code. Must be used before render method\r\n$this->layout->layout='your_layout_name';\r\n``    \r\nSetting title: Normally your title will be generated by your controller and method name separated by a separator. For example if your controller name is blog and method name is post then your title will be Post | Blog . You can manually set title by this\r\n\r\n``    \r\n//from controller\r\n$this->layout->title_for_layout = 'A cool title';\r\n//from views\r\n$Layout->title_for_layout = 'view';\r\n``    \r\nIf you want to set title from config file you can do this by setting auto_title false.\r\n\r\n``    \r\n//from controller\r\n$this->layout->auto_title = false;\r\n//from views\r\n$Layout->auto_title = false;\r\n``    \r\nAdding meta: For details please visit codeigniter user guide. If no meta specified then default meta from config will be rendered.\r\n\r\n``    \r\n$this->layout->meta = array(\r\n        array(\r\n            'name' => 'Content-type',\r\n            'content' => 'text/html; charset=utf-8',\r\n            'type' => 'equiv'\r\n        )\r\n    );\r\n//from views\r\n$Layout->meta = array(\r\n        array(\r\n            'name' => 'Content-type',\r\n            'content' => 'text/html; charset=utf-8',\r\n            'type' => 'equiv'\r\n        )\r\n    );\r\n``    \r\nAdding new script: New javascript can be added by add_js method from controller or view. It accepts two parameters\r\n1. $script: Depending on the value of the $type argument, either a path to the JavaScript file (including file extension) or inline JavaScript code. with $config['js_file_path'] will be added with the file path. If full url with http:// or https:// is provided as file source then $config['js_file_path'] will have no effect.\r\n2. $type: Either 'link' or 'embed' Use 'import' to include an external JavaScript file or 'embed' to wrap JavaScript code in tags. Default is link.\r\n\r\n``    \r\n//controller\r\n$this->layout->add_js('js/jquery.js');\r\n$this->layout->add_js('alert(1)', 'embed');\r\n$this->layout->add_js('http://code.jquery.com/jquery-1.8.3.min.js');\r\n\r\n//from view\r\n$Layout->add_js('js/jquery.js');\r\n$Layout->add_js('alert(1)', 'embed');\r\n$Layout->add_js('http://code.jquery.com/jquery-1.8.3.min.js');\r\n\r\n``    \r\nAdding new style: You can add external css file or embed style by add_css method. This method accept three parameters:\r\n\r\n$style: Depending on the value of the $type argument, either a path to the CSS file (including file extension) or inline CSS code. $config['css_file_path'] will be added with the file path. If full url with http:// or https:// is provided as file source then $config['css_file_path'] will have no effect.\r\n1. $type: Either 'link', 'import' or 'embed' Use 'link' to include an external CSS file, 'import' to include an external CSS file via the @import command, or 'embed' to wrap inline CSS code in tags. Default is 'link'.\r\n2. $media: Set media declaration, like 'all', 'screen', 'print', 'handheld', etc. Default value is 'all'.\r\n\r\n``    \r\n//from controller\r\n$this->layout->add_css('css/style.css');\r\n$this->layout->add_css('https://fbstatic-a.akamaihd.net/rsrc.php/v2/yM/r/_viyxU7WEX-.css');\r\n$this->layout->add_css('p{color: white;}', 'embed', 'screen');\r\n\r\n//from view\r\n$Layout->add_css('css/style.css');\r\n$Layout->add_css('https://fbstatic-a.akamaihd.net/rsrc.php/v2/yM/r/_viyxU7WEX-.css');\r\n$Layout->add_css('p{color: white;}', 'embed');\r\n\r\n``    \r\nRender a layout: If you use the hook you need to follow a simple convention. You should place your view file under a folder named after the controller name and file name will be method name with php extension. For example if your controller is welcome and method is index then file structure for view will be application/views/welcome/index.php . This file will be automatically rendered by the library. If you need to add dynamic data to the view you can use the set method like this\r\n\r\n``    \r\n$data = array(\r\n            'title' => 'My Title',\r\n            'heading' => 'My Heading',\r\n            'message' => 'My Message',\r\n            'input'=>array('name'=>'username'),\r\n        );\r\n $this->layout->set($data);\r\n \r\n``    \r\nIf you don't want automatic rendering then you can prevent this by setting auto_render to false.\r\n\r\n``    $this->layout->auto_render=false;``    \r\nNow to render a view you can do the following\r\n\r\n``    \r\n$this->layout->render('your_view_name'); //just like loading views\r\n``    \r\nTo add dynamic data to the view/layout you can use set method or just use it as a second parameter of render method. Your controller code now might look like this\r\n\r\n``    \r\n$this->layout->auto_render=false;\r\n$data = array(\r\n            'title' => 'My Title',\r\n            'heading' => 'My Heading',\r\n            'message' => 'My Message',\r\n            'input'=>array('name'=>'username'),\r\n        );\r\n$this->layout->set($data);\r\n$this->layout->render('your_view_name');\r\n\r\n``    \r\nor\r\n\r\n``    \r\n$this->layout->render('your_view_name', $data);\r\n\r\n``    ","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}